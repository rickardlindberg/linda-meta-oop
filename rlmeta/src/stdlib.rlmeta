PartCollector #n #last #parts #doneMsg {
  run =
    | "Part" !(!#n) process:x !. -> x
                                 -> kill()
  process =
    | #last .:x -> put([~doneMsg {parts x}])
    | .     .:x -> spawn(PartCollector(add(n 1) last [~parts x] doneMsg))
}

StdoutWriter {
  run = "Write" .:x !. -> write(x)
}
