PartCollector #n #last #parts #doneMsg {
  run =
    | "Part" !(!(#n)) process:x !. -> x
                                   -> kill()
  process =
    | #last .:x -> put(add(doneMsg [{parts x}]))
    | .     .:x -> spawn(PartCollector(add(n 1) last add(parts [x]) doneMsg))
}

StdoutWriter {
  run = "Write" .:x !. -> write(x)
}
